<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone.mls.listing"
      tal:omit-tag="">
  <body>
    <section id="recent-listings" class="listing-summary"
             metal:fill-slot="main"
             tal:define="page_url context/@@plone_context_state/current_base_url">

      <div tal:replace="structure provider:plone.abovecontenttitle" />
      <h1 class="documentFirstHeading">Recent MLS Listings</h1>
      <div tal:replace="structure provider:plone.belowcontenttitle" />

      <p class="documentDescription" tal:content="context/description|nothing" />

      <div tal:replace="structure provider:plone.abovecontentbody" />

      <p tal:define="text context/body_text|nothing" tal:condition="text" tal:replace="structure text/output">Body Text</p>

      <tal:listings tal:define="listings view/listings | nothing;
                                batching view/batching | nothing;"
                    tal:condition="listings">

        <div class="listingBar" tal:condition="batching">
          <span class="previous"
                tal:condition="batching/prev | nothing"><a href=""
                tal:attributes="href batching/prev">Previous Results</a></span>
          <span class="next"
                tal:condition="batching/next | nothing"><a href=""
                tal:attributes="href batching/next">Next Results</a></span>
        </div>

        <div class="tileItem visualIEFloatFix" style="margin-bottom: 1em;"
             tal:repeat="listing listings">
          <h2 class="tileHeadline"><a href="" class="summary url"
              tal:attributes="href string:${page_url}/${listing/id/value}"
              tal:content="listing/title/value">Listing Title</a></h2>

          <table class="tileBody">
            <tbody>
              <tr>
                <td class="lead-image" rowspan="6">
                  <a href=""
                     tal:define="image listing/lead_image|nothing"
                     tal:condition="image"
                     tal:attributes="href string:${page_url}/${listing/id/value}"><img class="image-left" src="" alt="" title=""
                     tal:attributes="src image" /></a>
                </td>
                <th style="width: 22%"><span tal:replace="listing/price/label|nothing">Label</span>:</th>
                <td style="width: 22%" tal:content="listing/price/value|nothing">Value</td>
                <th style="width: 22%"><span tal:replace="listing/workflow_status/label|nothing">Label</span>:</th>
                <td style="width: 22%" tal:content="listing/workflow_status/value|nothing">Value</td>
              </tr>

              <tr>
                <tal:item tal:define="item listing/listing_type | nothing"
                          tal:condition="item">
                  <th><span tal:replace="item/label|nothing">Label</span>:</th>
                  <td tal:content="item/value|nothing">Value</td>
                </tal:item>
                <th><span tal:replace="listing/image_count/label|nothing">Label</span>:</th>
                <td tal:content="listing/image_count/value|nothing">Value</td>
              </tr>

              <tr tal:condition="listing/object_type | listing/beds_baths | nothing">
                <th><span tal:replace="listing/object_type/label|nothing">Label</span>:</th>
                <td tal:content="listing/object_type/value|nothing">Value</td>
                <th><span tal:replace="listing/beds_baths/label|nothing">Label</span>:</th>
                <td tal:content="listing/beds_baths/value|nothing">Value</td>
              </tr>

              <tr tal:define="item listing/location | nothing"
                  tal:condition="item">
                <th><span tal:replace="item/label | nothing">Label</span>:</th>
                <td colspan="3" tal:content="item/value | nothing">Value</td>
              </tr>

              <tr tal:define="item listing/location_type | nothing"
                  tal:condition="item">
                <th><span tal:replace="item/label | nothing">Label</span>:</th>
                <td colspan="3" tal:content="item/value | nothing">Value</td>
              </tr>

              <tr tal:define="item listing/view_type | nothing"
                  tal:condition="item">
                <th><span tal:replace="item/label | nothing">Label</span>:</th>
                <td colspan="3" tal:content="item/value | nothing">Value</td>
              </tr>

            </tbody>
          </table>
          <div class="visualClear"></div>
        </div>

        <div class="listingBar" tal:condition="batching">
          <span class="previous"
                tal:condition="batching/prev | nothing"><a href=""
                tal:attributes="href batching/prev">Previous Results</a></span>
          <span class="next"
                tal:condition="batching/next | nothing"><a href=""
                tal:attributes="href batching/next">Next Results</a></span>
        </div>
      </tal:listings>

      <div tal:replace="structure provider:plone.belowcontentbody" />
    </section>
  </body>
</html>